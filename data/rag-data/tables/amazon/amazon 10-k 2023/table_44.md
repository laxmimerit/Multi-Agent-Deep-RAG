|                                           | Year Ended December 31,   | Year Ended December 31,   | Year Ended December 31,   |
|-------------------------------------------|---------------------------|---------------------------|---------------------------|
|                                           | 2021                      | 2022                      | 2023                      |
| U.S. Federal:                             |                           |                           |                           |
| Current                                   | $ 2,129                   | $ 2,175                   | $ 8,652                   |
| Deferred                                  | 155                       | (6,686)                   | (5,505)                   |
| Total                                     | 2,284                     | (4,511)                   | 3,147                     |
| U.S. State:                               |                           |                           |                           |
| Current                                   | 763                       | 1,074                     | 2,158                     |
| Deferred                                  | (178)                     | (1,302)                   | (498)                     |
| Total                                     | 585                       | (228)                     | 1,660                     |
| International:                            |                           |                           |                           |
| Current                                   | 2,209                     | 1,682                     | 2,186                     |
| Deferred                                  | (287)                     | (160)                     | 127                       |
| Total                                     | 1,922                     | 1,522                     | 2,313                     |
| Provision (benefit) for income taxes, net | $ 4,791                   | $ (3,217)                 | $ 7,120                   |
U.S. and international components of income (loss) before income taxes are as follows (in millions):

|                                   | Year Ended December 31,   | Year Ended December 31,   | Year Ended December 31,   |
|-----------------------------------|---------------------------|---------------------------|---------------------------|
|                                   | 2021                      | 2022                      | 2023                      |
| U.S.                              | $ 35,879                  | $ (8,225)                 | $ 32,328                  |
| International                     | 2,272                     | 2,289                     | 5,229                     |
| Income (loss) before income taxes | $ 38,151                  | $ (5,936)                 | $ 37,557                  |